<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Common Data Model</title>
</head>

<body>
<h1>Unidata's Common Data Model Version 4 </h1>
<h2>Overview</h2>
<p> Unidata&rsquo;s Common Data Model (CDM) is an abstract <a href="http://en.wikipedia.org/wiki/Data_model">data model</a> for scientific datasets. It merges the <a href="http://www.unidata.ucar.edu/software/netcdf/">netCDF</a>, <a href="http://www.opendap.org/">OPeNDAP</a>, and <a href="http://www.hdfgroup.org/products/hdf5/">HDF5</a> data models to create a common API for many types of scientific data. The NetCDF Java library is an implementation of the CDM which can read many <a href="http://www.unidata.ucar.edu/software/netcdf-java/index.html#formats">file formats</a> besides netCDF. We call these  <em><strong>CDM files,</strong></em> a shorthand for <em>files that can be read by the NetCDF Java library and accessed through the CDM data model</em>. </p>
<p>The CDM data model is close to, but not identical to the <a href="http://www.google.com/url?sa=t&source=web&ct=res&cd=1&url=http%3A//www.unidata.ucar.edu/presentations/Rew/nc4-iips.ppt&ei=_CgXSf6TCImMsAOQqKH7Cg&usg=AFQjCNHkGLUOBZlsXG3JNWfZ1mchBGM7kA&sig2=dBd8COl1oJYc7iQQSfYZaQ">netCDF-4 data model</a>. However there is a complete 2-way mapping between the two models. </p>
<ul>
  <li>Opaque type does not have the length in the type, arrays of Opaques may have different lengths.</li>
</ul>
<p>The Common Data Model has three layers, which build on top of each other to add successively richer semantics:</p>
<ol>
  <li>The <strong><em>data access layer</em></strong>, also know as the <strong><em>syntactic layer,</em></strong> handles data reading and writing. </li>
  <li>The <strong><em>coordinate system</em></strong> layer identifies the coordinates of the data arrays. Coordinates are a completely general concept for scientific data; we also identify specialized <strong><em>georeferencing coordinate systems</em></strong>, which are important to the Earth Science community.</li>
  <li>The <strong><em>scientific feature type</em></strong> layer identifies specific types of data, such as <em>grids</em>, <em>radial</em>, and <em>point data</em>, adding specialized methods for each kind of data.</li>
</ol>
<hr WIDTH="100%">
<h2>Data Access Layer Object Model </h2>
<p><img src="CDM-UML.png" alt="CDM UML" width="627" height="598"></p>
<p>&nbsp;</p>
<p><strong>A Dataset </strong>may be a netCDF, HDF5, GRIB, etc. file, an OPeNDAP dataset, a collection of files, or anything else which can be accessed through the netCDF API. We sometimes use the term <em><strong>CDM dataset</strong></em> to mean any of these possibilities, and to emphasize that a dataset does not have to be a file in netCDF format.</p>
<p>A <strong>Group</strong> is a container for Attributes, Dimensions, EnumTypedefs, Variables, and nested Groups<strong>. </strong>The Groups in a Dataset form a hierarchical tree, like directories on a disk.There is always at least one Group in a Dataset, the <strong>root Group</strong>, whose name is the empty string.  </p>
<p>A <strong>Variable</strong> is a container for data. It has a <em>DataType</em>, a set of Dimensions that define its array shape, and optionally a set of Attributes. Any shared Dimension it uses must be in the same Group or a parent Group. </p>
<p>A <strong>Dimension</strong> has a length, and is used to define the array shape of a Variable. It may be <em>shared</em> among Variables, which provides a simple yet powerful way of associating Variables. When a Dimension is shared, it has a unique name within the Group. If <em>unlimited</em>,  a Dimension's length may increase. If <em>variableLength</em>, then the actual length is data dependent, and can only be found by reading the data. A variableLength Dimension cannot be shared or unlimited. </p>
<p>An <strong>Attribute</strong> has a name and a value, and associates arbitrary metadata with a Variable or a Group. The value is a one dimensional array of Strings or numeric values.</p>
<p>A <strong>Structure</strong> is a type of Variable that contains other Variables, analogous to a <strong><em>struct</em></strong> in C, or a <em><strong>row</strong></em> in a relational database. In general, the data in a Structure are physically stored close together on disk, so that it is efficient to retrieve all of the data in a Structure at the same time. A Variable contained in a Structure is a <strong>member Variable</strong>, and can only be read in the context of its containing Structure. </p>
<p>A <strong>Sequence</strong> is a one dimensional Structure whose length is not known until you actually read the data. To access the data in a Sequence, you can only iterate through the Sequence, getting the data in one Structure instance at a time. </p>
<p>An <strong>EnumTypedef</strong> is an enumeration of Strings, used by Variables of type <em><strong>enum</strong></em>. </p>
<p>An <strong>Array</strong> contains the actual data for a Variable after it is read from the disk or network. You get an Array from a Variable by calling <strong><em>read()</em></strong> or its variants. An Array is  rectangular in shape (like Fortran arrays). There is a specialized Array type for each of the DataTypes. </p>
<p>An <strong>ArrayStructure</strong> is a subclass of Array that holds the data for Structure Variables. Essentially it is an array of  <strong>StructureData</strong> objects. </p>
<p><strong>DataType</strong> describes the possible types of data: </p>
<blockquote>
  <p>The <strong>primitive numeric </strong> types are <strong><em>byte, short, int, long, float</em></strong> and <strong><em>double</em></strong>. The integer types (8-bit byte, 16-bit short, 32-bit int, 64-bit long) may be <em>signed</em> or <em>unsigned</em>.  </p>
  <p>A <strong>String</strong> is a variable length array of <a href="http://unicode.org/">Unicode</a> characters. When reading/writing a String to a  file or other external representation, the characters are by default <a href="http://en.wikipedia.org/wiki/UTF-8">UTF-8 encoded</a> (note that ASCII is a subset of UTF-8). Libraries may use different internal representations, for example the Java library uses UTF-16 encoding. </p>
  <p>The <strong>char</strong> type contains uninterpreted  characters, one character per byte. Typically these contain 7-bit ASCII characters. </p>
  <p>An <strong>enum</strong> type is an enumeration of (distinct integer value, String) pairs.. A Variable with enum type stores  integer values, which can be converted to the  String <em>enum value</em>.</p>
  <p>An <strong>opaque</strong> type stores uninterpreted blobs of bytes. The length of the blob is not known until it is read. An array of opaque objects may have different lengths for each of the blobs. </p>
</blockquote>
<p>An <strong>Object name</strong> refers to the name of a Group, Dimension, Variable,  Attribute, or EnumTypedef. An object name is a String,  a variable length array of Unicode characters. The <a href="Identifiers.html">set of allowed characters</a> is still being considered. </p>
<hr WIDTH="100%">
<h2>Coordinate Systems</h2>
<ul>
  <li>see <a href="../reference/CSObjectModel.html">Coordinate System Object Model</a></li>
</ul>
<hr WIDTH="100%">
<h2>Scientific Feature Types<a name="ScientificFeatureTypes"></a></h2>
<ul>
  <li> CDM Feature Types <em> draft </em><a href="CDMfeatures.doc">doc</a></li>
  <li>CDM Point Feature Types <em> draft </em><a href="CDMpoints.doc">doc</a></li>
  <li><a href="http://cf-pcmdi.llnl.gov/trac/wiki/PointObservationConventions">Proposed CF Convention for Point Observation Data</a></li>
</ul>
<hr WIDTH="100%">
<address>
<img src="../nc.gif" width="64" height="64"> This document is maintained by <a href="mailto:caron@unidata.ucar.edu">John Caron</a> and was last updated on Nov 09, 2008 
</address>
<p>&nbsp;</p>
</body>
</html>
