<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Section Specification</title>
</head>

<body>
<h1>Collections Specification</h1>
<p>A <em><strong>collection specification string</strong></em>  creates a collection on the fly. Currently (4.1) only works for point feature collections.</p>
<h3>Example</h3>
<pre>
/data/ldm/pub/native/grid/NCEP/GFS/Alaska_191km/**/GFS_Alaska_191km_#yyyyMMdd_HHmm#\.grib1
<ul><li><strong>rootDir</strong>= /data/ldm/pub/native/grid/NCEP/GFS/Alaska_191km</li>
    <li><strong>subdirs</strong>= yes</li>
    <li><strong>dateFormatMark</strong>= GFS_Alaska_191km_#yyyyMMdd_HHmm</li>
    <li><strong>onName</strong>= yes</li>
    <li><strong>regexp</strong>= GFS_Alaska_191km.........\.grib1<br></li></ul></pre>
<h2>Use in CDM 4.1 library</h2>
<p><strong>FeatureDatasetFactoryManager.open(location, wantFeatureType)</strong> looks for <em><strong>collection:spec</strong></em> prefix for the location, and calls <strong>CompositeDatasetFactory.factory(wantFeatureType, spec)</strong> if found, which returns a FeatureDataset. Currently only a limited number of Point Feature tyeps are supported. This is an experimental feature.</p>
<h2>Proposed element in TDS, NcML</h2>
<p>Takes the place of datasetScan and scan.</p>
<pre>&lt;<strong>collection</strong> <strong>spec</strong>=&quot;/data/ldm/pub/native/satellite/3.9/WEST-CONUS_4km/WEST-CONUS_4km_3.9_#yyyyMMdd_HHmm#.gini&quot;<br>            <strong>recheckEvery</strong>=&quot;15 min&quot; <strong>olderThan</strong>=&quot;1 min&quot; /&gt;
</pre>
<blockquote>
  <p>where</p>
  <ol>
    <li><strong>spec</strong>: collection specification string</li>
    <li><strong>recheckEvery</strong>: allow coleection to be out -of-date by this much</li>
    <li><strong>olderThan</strong>: only files older than this<br>
    </li>
  </ol>
</blockquote>
<h3>  Example catalog elements:</h3>
<p><strong>model data:</strong></p>
<pre>&lt;<strong>datasetCollection</strong> <strong>name</strong>=&quot;NCEP-GFS-Alaska_191km&quot; <strong>featureType</strong>=&quot;FMRC&quot; <strong>path</strong>=&quot;fmrc/NCEP/GFS/Alaska_191km&quot;&gt;<br>

   &lt;collection spec=&quot;/data/ldm/pub/native/grid/NCEP/GFS/Alaska_191km/**/GFS_Alaska_191km_#yyyyMMdd_HHmm#.grib1&quot; recheckEvery=&quot;15 min&quot; olderThan=&quot;5 min&quot; /&gt;   
   &lt;<strong>fmrcDefinition</strong>&gt;NCEP-GFS-Alaska_191km.fmrcDefinition.xml&lt;/fmrcDefinition&gt;
&lt;/datasetCollection&gt;
</pre>
<p><strong>  point data:</strong></p>
<pre>&lt;<strong>datasetCollection</strong> <strong>name</strong>=&quot;6 minute&quot; <strong>featureType</strong>=&quot;STATION_PROFILE&quot; harvest=&quot;true&quot; <strong>path</strong>=&quot;station/profiler/wind/06min&quot;&gt;<br>  &lt;documentation type=&quot;summary&quot;&gt;Six minute average data.&lt;/documentation&gt;<br>  &lt;collection spec=&quot;/data/ldm/pub/native/profiler/wind/06min/**/PROFILER_wind_06min_#yyyyMMdd#.nc&quot; recheckEvery=&quot;15 min&quot; olderThan=&quot;5 min&quot; /&gt;
&lt;/datasetCollection&gt;
</pre>
<p><strong>satellite data:</strong><br>
</p>
<pre>
&lt;<strong>datasetCollection</strong> <strong>name</strong>=&quot;WEST-CONUS_4km&quot; <strong>featureType</strong>=&quot;Grid&quot; <strong>harvest</strong>=&quot;true&quot; <strong>path</strong>=&quot;satellite/3.9/WEST-CONUS_4km&quot;&gt;<br>  &lt;collection spec=&quot;/data/ldm/pub/native/satellite/3.9/WEST-CONUS_4km/WEST-CONUS_4km_3.9_#yyyyMMdd_HHmm#.gini&quot; recheckEvery=&quot;15 min&quot; olderThan=&quot;1 min&quot; /&gt;<br>&lt;/datasetCollection&gt;<br></pre>
<blockquote>
  <p>  where:</p>
  <ol>
    <li><strong>name</strong>: logical name of dataset. Auto generate this and ID if not present ??</li>
    <li><strong>featureType</strong>: required. processing is different for each type</li>
    <li><strong>path</strong>: logical URL of datset, as before</li>
  </ol>
  </blockquote>
<h3>Other goals:</h3>
<ul>
  <li>Default services depend on featureType, may be configured by User or overridden in catalog.</li>
  <li>Automatic metadata extraction (time/space BB and variable names)</li>
  <li>Default publisher/author etc added to each catalog.</li>
  <li>Allow references to template metadata</li>
</ul>
<hr WIDTH="100%">
<address>
<img src="../nc.gif" width="64" height="64"> This document is maintained by <a href="mailto:caron@unidata.ucar.edu">John Caron</a> and was last updated  Jan 2010
</address>
</body>
</html>
