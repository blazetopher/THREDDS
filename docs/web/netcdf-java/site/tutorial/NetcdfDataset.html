<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Untitled Document</title>
</head>

<body>
<h1><span style=""><span style=""><span style=""><span style=""><span style=""><a>Tutorial: Working with NetcdfDataset</a></span></span></span></span></span><span style=""><span style=""><span style=""><o:p></o:p></span></span></span></h1>
<p class="MsoBodyTextIndent" style="text-indent: 0in;"><span style=""><span style=""><span style="">The <b>ucar.nc2.dataset</b> package and related packages are an extension to the NetCDF API which recognize standard attributes, provides support for general and georeferencing coordinate systems, provide support for the NetCDF Markup Language (NcML), and provides remote access to OpenDAP, ADDE and THREDDS datasets. <b><i>NetcdfDataset.openFile</i></b> is the recommended way to open any dataset as a <b><i>NetcdfFile</i></b>.<span style="">&nbsp; </span></span></span></span></p>
<p class="MsoBodyTextIndent" style="text-indent: 0in;"><span style=""><span style=""><span style=""><o:p></o:p></span></span></span><span style=""><span style=""><span style="">NcML is an XML document format that allows you to create "virtual" netCDF datasets, including combining multiple netCDF files into one dataset. This section focuses on the extension of the netCDF API to include coordinate systems. Section 4 below explains NcML and how to create virtual datasets.</span></span></span></p>
<h3 class="MsoNormal">Using <span class="MsoBodyTextIndent"><span style=""><span style=""><span style=""><b><i>NetcdfDataset.openFile</i></b> </span></span></span></span>to open a <span style=""><span style=""><span style=""><span style=""><span style=""><a>NetcdfFile</a></span></span></span></span></span> </h3>
<p><span class="MsoNormal">The preferred way to  open a NetcdfFile is through the <strong>NetcdfDataset.openFile</strong></span> factory method: </p>
<pre class="MsoNormal">  String filename = &quot;http://motherlode.ucar.edu:8080/thredds/dodsC/model/NCEP/GFS/CONUS_80km/GFS_CONUS_80km_20061019_0000.grib1&quot;;
  NetcdfFile ncfile = null;<br>  <strong>try</strong> {<br>    ncfile = <strong>NetcdfDataset.openFile</strong>(filename, null);<br>    process( ncfile);<br>  } <strong>catch</strong> (IOException ioe) {<br>    log(&quot;trying to open &quot; + filename, ioe);
  } <strong>finally</strong> { 
    if (null != ncfile) try {
      <strong>ncfile.close</strong>();
    } catch (IOException ioe) {
      log(&quot;trying to close &quot; + filename, ioe);
    }
  }
</pre>
<p class="MsoBodyTextIndent"><span style="">NetcdfDataset.openFile does the follwing<span style="">:</span></span></p>
<ul>
  <li>Opens a OPeNDAP remote dataset, if the location is a URL that starts with <strong>http:</strong> or <strong>dods:</strong> </li>
  <li>Opens a THREDDS dataset, if the location starts with <strong>thredds:&lt;catalog&gt;#&lt;datasetId&gt;</strong></li>
  <li>Opens an NcML dataset, if the location ends with <strong>.xml</strong> or <strong>.ncml</strong> </li>
  <li>Otherwise, it calls <span class="MsoBodyTextIndent"><strong>NetcdfFile.open</strong></span></li>
</ul>
<h3 class="MsoNormal">Using <span class="MsoBodyTextIndent"><span style=""><span style=""><span style=""><b><i>NetcdfDataset.openDataset</i></b> </span></span></span></span>to open an enhanced <span style=""><span style=""><span style=""><span style=""><span style=""><a>NetcdfDataset</a></span></span></span></span></span> </h3>
<p><span class="MsoNormal">When you want  the Netcdf-Java library to deal with missing values and scale/offset unpacking, and to identify Coordinate Systems, you should use the <strong>NetcdfDataset.openDataset</strong></span> factory call, for example: </p>
<pre class="MsoNormal">  String filename = &quot;http://motherlode.ucar.edu:8080/thredds/dodsC/model/NCEP/GFS/CONUS_80km/GFS_CONUS_80km_20061019_0000.grib1&quot;;
  NetcdfFile ncfile = null;<br>  <strong>try</strong> {<br>    ncfile = <strong>NetcdfDataset.openDataset</strong>(filename);<br>    process( ncfile);<br>  } <strong>catch</strong> (IOException ioe) {<br>    log(&quot;trying to open &quot; + filename, ioe);
  } <strong>finally</strong> { 
    if (null != ncfile) try {
      <strong>ncfile.close</strong>();
    } catch (IOException ioe) {
      log(&quot;trying to close &quot; + filename, ioe);
    }
  }
</pre>
<p class="MsoBodyTextIndent"><span style=""><strong>NetcdfDataset.openDataset</strong> does the follwing<span style="">:</span></span></p>
<ul>
  <li>Calls <span class="MsoBodyTextIndent"><span style=""><strong>NetcdfDataset.openFile</strong>, and wraps the returned <span class="MsoNormal"><strong>NetcdfFile</strong></span> in a <span class="MsoNormal"><strong>NetcdfDataset</strong> if necessary.</span></span></span></li>
  <li>It processes <span class="MsoNormal"> missing values and scale/offset attributes, modifying <strong>Variable</strong> data types if necessary</span></li>
  <li>It calls the appropriate Coordinate System Builder class to identify the coordinate systems and populate the Coordinate objects. </li>
</ul>
<h3>The Coordinate Objects</h3>
<p>&nbsp;</p>
</body>
</html>
