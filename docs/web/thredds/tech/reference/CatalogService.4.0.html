<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  


<title>THREDDS Reference: TDS Catalog Service</title><style type="text/css">
pre {font-size: 9pt; padding: 10px; background-color: #E7E7E7; border: 1px solid #CFCFCF; width: 85%;}
code {font-size: 11pt;}
dl {margin: 10px 5px 5px 15px;)
</style></head>
<body>
<h1><img alt="THREDDS" src="../images/THREDDSlogo.jpg" height="54" width="67">THREDDS Reference: TDS Catalog Service</h1>
<div class="head">
<hr>

<p>The TDS provides various services for THREDDS catalogs. Catalogs
served by the TDS can be subset and/or viewed as HTML. Remote catalogs,
if allowed, can be validated, displayed as HTML, or subset.</p><h2>Configuration</h2><p>Local
catalogs always&nbsp;support subsetting (with the "dataset" and
"command=&lt;datasetId&gt;" parameters) and HTML view (with the ".html" extension).</p><p>Remote catalogs are only allowed if the following is added to the content/thredds/threddsConfig.xml file:</p><pre style="margin-left: 40px;">&lt;CatalogServices&gt;<br>    &lt;allowRemote&gt;true&lt;/allowRemote&gt;<br>&lt;/CatalogServices&gt;</pre><p>*****</p><p>Not ready yet. The following is from the TDS javadocs for LocalCatalogServiceController and RemoteCatalogServiceController</p><p>And further down is from 3.16 docs. Need to merge and such</p><p>*****</p>

  <h2>Catalog Services for Local TDS Served Catalogs</h2>
<p>Currently, handles the following TDS requests:
</p><ul>
  <li>Mapping="/catalog/*" -- e.g., ServletPath="/catalog" and PathInfo="/some/path/*.html"</li>
  <li>Mapping="*.xml"      -- ServletPath="/some/path/*.xml" and PathInfo=null</li>
  <li>Mapping="*.html"     -- ServletPath="/some/path/*.html" and PathInfo=null</li>
</ul>

<p> Uses the following information from an HTTP request:
</p><ul>
  <li> The "local catalog path" identifies the local catalog to use. Its
    value is either getPathInfo() or getServletPath() depending on how the
    requests are mapped to the servlet, see
   {@link thredds.util.TdsPathUtils#extractPath(javax.servlet.http.HttpServletRequest)
    TdsPathUtils.extractPath()}.</li>
  <li>The "local catalog path" extension (which must be either ".xml" or
    ".html") determines whether the catalog is displayed with an XML or
    an HTML view. [Note: the ".html" ending is replaced with ".xml" when
    the path is used to locate the local catalog.]</li>
  <li>The "command" parameter must either be empty or have a value of
    "SHOW" or "SUBSET", see {@link Command}; </li>
  <li>The parameter "dataset" identifies a dataset contained by the
    local catalog. </li>
</ul>

<p>Constraints on the above information:
</p><ul>
  <li>The "local catalog path" may end in either ".xml" or ".html" and
    must reference an existing local catalog. A ".html" ending is replaced
    with ".xml" when the path is used to locate the local catalog. </li>
  <li>The "dataset" parameter must either be empty or contain the value
    of a dataset ID contained in the catalog.</li>
  <li>If the "command" parameter is empty, it will default to "SHOW" if
    the "dataset" parameter is empty, otherwise it will default to "SUBSET".</li>
</ul>

  <hr>
  <h2>Catalog Services for Remote Catalog</h2>

Currently, handles the following TDS requests:
<ul>
  <li>Mapping="/remoteCatalogService"</li>
</ul>

<p> NOTE: Only supported if CatalogServices/allowRemote is set to "true" in threddsConfig.xml.

</p><p> Uses the following information from an HTTP request:
</p><ul>
  <li>The "catalog" parameter gives the URI of a remote catalog.</li>
  <li>The "command" parameter must either be empty or have one of the
    following values: "SHOW", "SUBSET", or "VALIDATE", see
    {@link Command}.</li>
  <li>The "dataset" parameter identifies a dataset contained by the
    local catalog. [Used only in "SUBSET" requests.]</li>
  <li>The "htmlView" parameter indicates if an HTML or XML view is
    desired. [Used only in "SUBSET" requests.]</li>
  <li>The "verbose" parameter indicates if the output of a "VALIDATE"
    request should be verbose ("true") or not ("false" or not given).</li>
</ul>

<p>Constraints on the above information:
</p><ul>
  <li>The catalog URI must be absolute and is expected to reference a
    THREDDS catalog XML document.</li>
  <li>The "dataset" parameter must either be empty or contain the value
    of a dataset ID contained in the catalog.</li>
  <li>If the "command" parameter is empty, it will default to "SHOW" if
    the "dataset" parameter is empty, otherwise it will default to "SUBSET".</li>
</ul>
  

  <hr>

  <h2>Supported Parameters</h2><p>Not all of the following parameters are supported in all situations.</p><ul><li><code>catalog</code> - Specifies a remote target catalog.</li><li><code>cmd</code> - Specifies the action to perform. Possible values are:</li><ul><li>"show" - Provide an HTML view of the target catalog [the default unless a dataset parameter is given].</li><li>"subset" - Subset the target catalog [the default only when&nbsp;a dataset parameter is given].</li><li>"validate" - Validate the target catalog and return validation messages.</li></ul><li><code>dataset</code> - Specifies the ID of the dataset in the target catalog to be used in subsetting the catalog.</li><li><code>debug</code> - Indicates that verbose validation messages are desired ("true" or "false" [default]).</li></ul><h2>Supported URL Endpoints</h2><h3>URL Endpoint: "<code>/thredds/catalog.xml</code>" or "<code>/thredds/catalog.html</code>"</h3><p>When
no "catalog" parameter is given, perform the requested service on the
root TDS catalog. If a "catalog" parameter is given, the value must be
the URL of a remote THREDDS catalog. The
requested service is then performed on the catalog at the given URL.</p><p>The following requests are supported:</p><ul><li>No
parameters - Return the XML view (when the URL ends with ".xml") or the
HTML view (when the URL ends with ".html") of the root TDS catalog.</li><li>"<code><strong>?dataset=&lt;dsID&gt;</strong></code>" - Return a subset of the root TDS catalog (XML or HTML depending on the file extension).</li><li>"<code><strong>?dataset=&lt;dsID&gt;&amp;cmd=subset</strong></code>" - Same as above.</li><li>"<code><strong>?catalog=&lt;catURL&gt;</strong></code>" - Return the HTML view (only if the ".html" form of the URL endpoint is used) of the target catalog.</li><li>"<code><strong>?catalog=&lt;catURL&gt;&amp;cmd=validate</strong></code>" - Parse and validate the target catalog and return validation messages.</li><li>"<code><strong>?catalog=&lt;catURL&gt;&amp;cmd=validate&amp;debug=true</strong></code>" - Same as above with verbose messages.</li><li>"<strong><code>?catalog=&lt;catURL&gt;&amp;dataset=&lt;dsID&gt;</code></strong>" - Return &nbsp;a subset of the target catalog (XML or HTML view&nbsp;depending on the URL endpoint file extension).</li><li>"<code><strong>?catalog=&lt;catURL&gt;&amp;dataset=&lt;dsID&gt;&amp;cmd=subset</strong></code>" - Same as above.</li></ul><p>Where
"&lt;dsId&gt;" must be&nbsp;the dataset ID of a dataset in the target
catalog and "&lt;catURL&gt;" must be the URL of a remote THREDDS
catalog.</p><h3>URL Endpoint: "<code>/thredds/catalogServices</code>"</h3><p>The "catalog" parameter is required. An HTML view is only given if the value of the "cmd" parameter is "show".</p><p>The supported requests are:</p><ul><li>"<code><strong>?catalog=&lt;catURL&gt;</strong></code>" - Return the HTML view of the target catalog.</li><li>"<code><strong>?catalog=&lt;catURL&gt;&amp;cmd=validate</strong></code>" - Parse and validate the target catalog and return validation messages.</li><li>"<code><strong>?catalog=&lt;catURL&gt;&amp;cmd=validate&amp;debug=true</strong></code>" - Same as above with verbose messages.</li><li>"<strong><code>?catalog=&lt;catURL&gt;&amp;dataset=&lt;dsID&gt;</code></strong>" - Return &nbsp;a subset of the target catalog as&nbsp;XML.</li><li>"<code><strong>?catalog=&lt;catURL&gt;&amp;dataset=&lt;dsID&gt;&amp;cmd=subset</strong></code>" - Same as above.</li><li>"<code><strong>?catalog=&lt;catURL&gt;&amp;dataset=&lt;dsID&gt;&amp;cmd=show</strong></code>" - Return a subset of the target catalog as&nbsp;HTML.</li></ul><h3>URL Endpoint: "<code>/thredds/**/*.xml</code>" or "<code>/thredds/**/*.html</code>"</h3><p>Support catalog services for all local TDS served catalogs (except for the root catalog which is discussed above). The
"catalog" parameter is not supported. The target catalog is givened by
the URL path. Whether the XML view or the HTML view are returned
depends on the file extension (".xml" or ".html").</p><p>The supported requests are:</p><ul><li>No parameters - Return the XML view or the HTML view&nbsp;of the target catalog.</li><li>"<code><strong>?dataset=&lt;dsID&gt;</strong></code>" - Return a subset of the target catalog in XML or HTML.</li><li>"<code><strong>?dataset=&lt;dsID&gt;&amp;cmd=subset</strong></code>" - Same as above.</li></ul><p>Note:
This includes configuration catalogs (e.g., "/thredds/idd/models.xml")
as well as dynamically generated catalogs (e.g.,
"/thredds/catalog/model/NCEP/NAM/catalog.xml").</p><br></div>
<hr width="100%">
<address><img alt="THREDDS" src="../images/thread.png" height="108" width="110">This document is maintained by Unidata and was
last updated January 2009. Send comments to <a href="mailto:support-thredds@unidata.ucar.edu">THREDDS
support</a>.
</address>
<p>&nbsp;</p>
</body></html>