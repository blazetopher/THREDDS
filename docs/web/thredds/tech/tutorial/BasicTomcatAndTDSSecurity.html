<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
 <html>
  <head>
   <title>TDS Tutorial: Basic Tomcat &amp; TDS Security</title>
   <link rel="stylesheet" href="tutorial.css" type="text/css" /> 
   <script language="JavaScript1.2" src="http://www.unidata.ucar.edu/acemenu/last_mod.js"></script>
   <link rel="SHORTCUT ICON" href="http://www.unidata.ucar.edu/favicon.ico" type="image/x-icon" />
  </head>
  <body>

   <h1>TDS Tutorial: Basic Tomcat &amp; TDS Security</h1>
   <div id="section">
    <h2><a name="files">Tomcat (Server-Level) Configuration Files</a></h2>

     <div id="subsection">
      <h3>About <code>server.xml</code> </h3>

      <div id="note" class="reminder">
       <h4>A Thing to Remember</h4>
       <p>Tomcat's configuration files, including  <code><small>server.xml</small></code> can be found in: <code><small>$TOMCAT_HOME/conf/</small></code></p>
      </div>
      <ul>
       <li>XML file (well-formed syntax is important)</li>
       <li>Tomcat's main configuration file</li>
       <li>Changes to <code><small>server.xml</small></code> do not take effect until Tomcat is restarted</li>
       <li>Where we make changes to enhance TDS security</li>

      </ul>
     </div> <!-- end  subsection -->




     <div id="subsection">
      <h3>Important elements in <code>server.xml</code></h3>
       <ol>
        <li>Examine the Elements in <code>server.xml</code></li>
         <p>Move into the Tomcat <code><small>conf/</small></code> directory and examine the <code><small>server.xml</small></code> file:</p>
<pre>
<b>$</b> cd $TOMCAT_HOME/conf/
<b>$</b> less server.xml
</pre>  

         <p>Reference the table below to see how the <code><small>server.xml</small></code> elements relate to configuring TDS (mouse-over the element for a description):</p>
          <table>
           <tr>
            <th>  
             Tag Name
            </th>
            <th> 
             Instances
            </th> 
            <th> 
             How it relates to the TDS
            </th>
           </tr>

           <tr>
            <td> 
              <a class="tooltip" href="http://tomcat.apache.org/tomcat-6.0-doc/config/server.html"><code>&lt;Server&gt;</code><b><em class="outer"></em><em class="inner"></em><big>Description:</big> The <code>Server</code> element represents the entire Catalina servlet container as a whole. It is the single outermost element in <code>server.xml</code></b></a>
            </td>
            <td>   
              1...1
            </td> 
            <td> 
               Not modified unless you want to change the port number Tomcat listens for a SHUTDOWN command. (Enabled by default.)
            </td>
           </tr>

           <tr>
            <td style="padding-left: 20px"> 
              <a class="tooltip" href="http://tomcat.apache.org/tomcat-6.0-doc/config/globalresources.html"><code>&lt;GlobalNamingResources&gt;</code><b><em class="outer"></em><em class="inner"></em><big>Description:</big> The <code>GlobalNamingResources</code> element defines the global Java Naming and Directory Interface (JNDI) resources for the Server.</b></a>
            </td>
            <td>   
             0...*
            </td> 
            <td> 
             Needed to contain the <code>UserDatabase</code> that corresponds to the <code>UserDatabaseRealm</code> used to authenticate users. (Enabled by default.)

            </td>
           </tr>

           <tr>
            <td style="padding-left: 40px">  
              <a class="tooltip" href="http://tomcat.apache.org/tomcat-6.0-doc/config/resources.html"><code>&lt;Resource&gt;</code><b><em class="outer"></em><em class="inner"></em><big>Description:</big> The <code>Resource</code> element represents a static resource from which classes will be loaded and static files will be served.</b></a>
            </td>
            <td>   
             0...*
            </td> 
            <td> 
             Editable user database (<code>tomcat-users.xml</code>) used by <code>UserDatabaseRealm</code> to authenticate users. (<code>UserDatabaseRealm Resource</code> Enabled by default.)
            </td>
           </tr>

           <tr>
            <td style="padding-left: 20px"> 
              <a class="tooltip" href="http://tomcat.apache.org/tomcat-6.0-doc/config/service.html"><code>&lt;Service&gt;</code><b><em class="outer"></em><em class="inner"></em><big>Description:</big> The <code>Service</code> element represents the combination of one or more <code>Connector</code> components that share a single Engine component for processing incoming requests. The top Tomcat <code>service</code> is named <code>Catalina</code> (hence the log file name of <code>catalina.out</code>).</b></a>
            </td>
            <td>   
             1...*
            </td> 
            <td> 
              Not modified unless you wish to establish more than one service. (<code>Catalina Service</code> enabled by default.)
            </td>
           </tr>

           <tr>
            <td style="padding-left: 40px">  
              <a class="tooltip" href="http://tomcat.apache.org/tomcat-6.0-doc/connectors.html"><code>&lt;Connector&gt;</code><b><em class="outer"></em><em class="inner"></em><big>Description:</big> The <code>Connector</code> element forward requests to the <code>Engine</code> using a specific protocol and returns the results to the requesting client. </b></a>
            </td>
            <td>   
             1...*
            </td> 
            <td> 
             Used to establish HTTP and SSL connections.  Also will communicate with an web server for proxying requests. (HTTP connector enabled by default on port 8080.)
            </td>
           </tr>

           <tr>
            <td style="padding-left: 40px">  
             <a class="tooltip" href="http://tomcat.apache.org/tomcat-6.0-doc/config/engine.html"><code>&lt;Engine&gt;</code><b><em class="outer"></em><em class="inner"></em><big>Description:</big> The <code>Engine</code> element represents the entire request processing machinery associated with a particular Catalina <code>Service</code>.</b></a>
            </td>
            <td>   
             1...1
            </td> 
            <td> 
             Not modified unless you specify a <code>Host</code> other than <code>localhost</code>. (Enabled by default.)
            </td>
           </tr>

           <tr>
            <td style="padding-left: 60px">  
              <a class="tooltip" href="http://tomcat.apache.org/tomcat-6.0-doc/config/realm.html"><code>&lt;Realm&gt;</code><b><em class="outer"></em><em class="inner"></em><big>Description:</big> The <code>Realm</code> element represents a "database" of usernames, passwords, and roles (groups) assigned to those users. </b></a>
            </td>
            <td>   
             0...*
            </td> 
            <td> 
             The <code>UserDatabaseRealm</code> uses the <code>UserDatabase</code> configured in the global JNDI <code>Resource</code>. (<code>UserDatabaseRealm</code> enabled by default.)
            </td>
           </tr>


           <tr>
            <td style="padding-left: 60px">  
             <a class="tooltip" href="http://tomcat.apache.org/tomcat-6.0-doc/config/valve.html"><code>&lt;Valve&gt;</code><b><em class="outer"></em><em class="inner"></em><big>Description:</big> The <code>Valve</code> element represents a component that will be inserted into the request processing pipeline for the associated containing element.</b></a>
            </td>
            <td>   
             0...*
            </td> 
            <td> 
             The <code>RemoteAddrValve</code> is used to filter access to the TDS based on IP address.  (NOT enabled by default.  You will need to add this if you want to use IP Filtering.)
            </td>
           </tr>
           <tr>
            <td style="padding-left: 60px">  
             <a class="tooltip" href="http://tomcat.apache.org/tomcat-6.0-doc/config/host.html"><code>&lt;Host&gt;</code><b><em class="outer"></em><em class="inner"></em><big>Description:</big> The <code>Host</code> element represents a virtual host.</b></a>
            </td>
            <td>   
             1...*
            </td> 
            <td> 
             Not modified unless you specify a <code>Host</code> other than <code>localhost</code>. (<code>localhost</code> enabled by default.)
            </td>
           </tr>
           <tr>
            <td style="padding-left: 80px">  
             <a class="tooltip" href="http://tomcat.apache.org/tomcat-6.0-doc/config/realm.html"><code>&lt;Realm&gt;</code><b><em class="outer"></em><em class="inner"></em><big>Description:</big> The <code>Realm</code> element represents a "database" of usernames, passwords, and roles (groups) assigned to those users. </b></a>
            </td>
            <td>   
             0...*
            </td> 
            <td> 
             We use the <code>MemoryRealm</code> to configuring Tomcat to use digested passwords. (NOT enabled by default.  You will need to add this if you want to use digested passwords.)
            </td>
           </tr>
           <tr>
            <td style="padding-left: 80px">  
             <a class="tooltip" href="http://tomcat.apache.org/tomcat-6.0-doc/config/valve.html"><code>&lt;Valve&gt;</code><b><em class="outer"></em><em class="inner"></em><big>Description:</big> The <code>Valve</code> element represents a component that will be inserted into the request processing pipeline for the associated containing element.</b></a>
            </td>
            <td>   
             0...*
            </td> 
            <td> 
             We modify the <code>AccessLogValve</code> to customize the access logs generated by Tomcat. (NOT enabled by default.  You will need to add this if you want to enable access logging.)
            </td>
           </tr>
          </table>
      </ol>
     </div> <!-- end server.xml Elements subsection -->


     <div id="subsection">
      <h3>About <code>tomcat-users.xml</code> </h3>
      <ul>
       <li>XML file (well-formed syntax is important)</li>
       <li>Stores user names, passwords and roles</li>
       <li>Changes to <code>tomcat-users.xml</code> do not take effect until Tomcat is restarted</li>
       <li>What the TDS uses for user authentication and access control</li>
      </ul>
     </div> <!-- end  subsection -->




     <div id="subsection">
      <h3>Important elements in <code>tomcat-users.xml</code></h3>
       <ol>
        <li>Examine the Elements in <code>tomcat-users.xml</code></li>
         <p>Open the <code><small>$TOMCAT_HOME/conf/tomcat-users.xml</small></code> file:</p>
<pre>
<b>$</b> less $TOMCAT_HOME/conf/tomcat-users.xml
</pre>  

         <p>Reference the table below to see how the <code><small>tomcat-users.xml</small></code> elements relate to configuring TDS (mouse-over the element for a description):</p>
          <table>
           <tr>
            <th>  
             Tag Name
            </th>
            <th> 
             Instances
            </th> 
            <th> 
             How it relates to the TDS
            </th>
           </tr>

           <tr>
            <td> 
             <a class="tooltip" href="http://tomcat.apache.org/tomcat-6.0-doc/realm-howto.html"><code>&lt;tomcat-users&gt;</code><b><em class="outer"></em><em class="inner"></em><big>Description:</big> The <code>tomcat-users</code> element represents the single outermost element in <code>tomcat-users.xml</code></b>
            </td>
            <td>   
             1...1
            </td> 
            <td> 
             Not modified.  (The only tag you get by default.)
            </td>
           </tr>

           <tr>
            <td style="padding-left: 20px"> 
             <a class="tooltip" href="http://tomcat.apache.org/tomcat-6.0-doc/realm-howto.html"><code>&lt;role&gt;</code><b><em class="outer"></em><em class="inner"></em><big>Description:</big> The <code>role</code> element defines one role or group a user can belong to.</b>
            </td>
            <td>   
             1...*
            </td> 
            <td> 
             You will have at least two of these: one for the Tomcat <code>manager</code> application and one for the TDS. (You will need to add if you want to enable role-based authentication.)
            </td>
           </tr>

           <tr>
            <td style="padding-left: 20px"> 
             <a class="tooltip" href="http://tomcat.apache.org/tomcat-6.0-doc/realm-howto.html"><code>&lt;user&gt;</code><b><em class="outer"></em><em class="inner"></em><big>Description:</big> The <code>user</code> element represents one valid user.</b>
            </td>
            <td>   
             1...*
            </td> 
            <td> 
             You will need to create an entry for each user who needs access to the Tomcat <code>manager</code> application and/or the restricted areas of the TDS.  (You will need to add if you want to enable user authentication.)
            </td>
           </tr>   
          </table>
       </ol>
      </div> <!-- end subsection -->




   </div> <!-- end Tomcat Configuration Files section -->






   <div id="section">
    <h2><a name="manager">Tomcat <code>manager</code> Application</a></h2>


     <div id="subsection">
      <h3>About the <code>manager</code> application</h3>
      <div id="note" class="info">
       <h4>More About <code>manager</code></h4>
       <p>For more information about the Tomcat <code><small>manager</small></code> application, see the Tomcat <a href="http://tomcat.apache.org/tomcat-6.0-doc/manager-howto.html">Manager App HOW-TO</a> documentation.</p>
      </div>



      <ul>
       <li>"Free" web application that comes with Tomcat distribution</li>
       <li>Lives in the <code>$TOMCAT_HOME/webapps/manager</code> directory </li>
       <li>Allows Tomcat admins to deploy, undeploy, or reload web applications such as the TDS without having to shut down and restart Tomcat</li>
       <li>Provides server status statistics for the JVM and each connector you have configured in <code>server.xml</code></li>
      </ul>

     </div> <!-- end subsection -->


     <div id="subsection">
      <h3>Accessing the Tomcat <code>manager</code> application</h3>

      <p>Attempt to access the Tomcat <code><small>manager</small></code> application in your browser: <a href="http://localhost:8080/manager/html/">http://localhost:8080/manager/html/</a>. You will be prompted to login via BASIC authentication, which will end in failure since we do not yet have permission to access the <code><small>manager</small></code> application.</p>
        
        <p><img src="../images/401.gif" height="353" width="400"></p>

      <div id="expanded" class="question">
       <p>Based on what we know about Tomcat configuration, which file in <code><small>$TOMCAT_HOME/conf/</small></code> should we edit to grant ourself access to the <code><small>manager</small></code> application?</p>
      </div>

     </div> <!-- end subsection -->




     <div id="subsection">
      <h3>Granting access to the <code>manager</code> application</h3>

       <ol>
        <li>Modify <code>tomcat-users.xml</code> to add <code>role</code> and <code>user</code> elements.</li>
         <p>Using your favorite editor, open <code><small>$TOMCAT_HOME/conf/tomcat-users.xml</small></code>:</p>
<pre>
<b>$</b> vi tomcat-users.xml
</pre>   
        <p>Between the <code><small>&lt;tomcat-users&gt;</small></code> tags, add a <code><small>role</small></code> element and specify the <code><small>rolename</small></code> attribute as <code><small>manager</small></code>:</p>
          
<pre>
&lt;tomcat-users&gt;
    &lt;role rolename="manager"/&gt;
&lt;/tomcat-users&gt;
</pre>  
          <p>Now add a new user by adding a <code><small>user</small></code> element. Create a <code><small>username</small></code> and <code><small>password</small></code> for the new user and specify <code><small>manager</small></code> as one of the <code><small>roles</small></code> (in this example we are creating a user called 'admin' with a corresponding password of 'secret'):</p>
<pre>
&lt;tomcat-users&gt;
    &lt;role rolename="manager"/&gt;
    &lt;user name="admin" password="secret" roles="manager"/&gt;   
&lt;/tomcat-users&gt;
</pre>  
        <li>Restart Tomcat and log into the <code>manager</code> application.</li>

      <div id="note" class="reminder">
       <h4>A Thing  to Remember</h4>
       <p>Changes to <code><small>tomcat-users.xml</small></code> do not take effect until Tomcat is restarted.</p>
      </div>

           <p>Attempt to access the <code><small>manager</small></code> application again, this time logging in using the <code><small>name</small></code> and <code><small>password</small></code> specified in <code><small>tomcat-users.xml</small></code>:  </p>

         <p><img src="../images/tomcat_manager.gif" height="449" width="400" alt="Tomcat manager application"></p>

      <div id="note" class="ahead">
       <h4>Thinking Ahead</h4>
       <p>To gain access to restricted parts of the TDS, you will perform the same steps you used to grant yourself access to the <code><small>manager</small></code> application.</p>
      </div>


         <p>Voil&#224;!  You should have access to the <code>manager</code> application.</p>
          
       </ol>

      <div id="expanded" class="troubleshooting">
       <h4>Troubleshooting Tips</h4>
       <ul>
        <li>Check the XML syntax in <code><small>tomcat-users.xml</small></code> to make sure it is well-formed and without error.</li>
        <li>Did you restart Tomcat after you made your changes to <code><small>tomcat-users.xml</small></code>?</li>
        <li>Any errors will be reported in <code><small>$TOMCAT_HOME/logs/catalina.out</small></code>. </li>
       </ul>
      </div>
     </div> <!-- end subsection -->



      <div id="subsection" class="exercise">
       <h3>Exercise One: Grant yourself access to the Tomcat <code>manager</code> application</h3>
       <ol>
        <li>Using the steps outlined above, modify <code>$TOMCAT_HOME/conf/tomcat-users.xml</code> to grant yourself access to the Tomcat <code>manager</code> application.</li>
       </ol>
      </div>



     <div id="subsection">
      <h3>Deploying the TDS using the <code>manager</code> application</h3>
      <ol>
       <li>Use the <code>manager</code> application to undeploy the TDS.</li>          
        <p>Find the TDS in the list of web application on the <code><small>Applications</small></code> page.  <b>Stop</b> and then <b>Undeploy</b> the TDS:</p>
        <p><img src="../images/undeploy.gif" height="92" width="754" alt="Undeploy the TDS"></p>
        <p>List the contents of <code><small>$TOMCAT_HOME/webapps/</small></code> to verify that both <code><small>thredds.war</small></code> and the unpacked <code><small>thredds/</small></code> directory have been removed:</p>
<pre>
<b>$</b> cd $TOMCAT_HOME/webapps
<b>$</b> ls -l
total 10284
drwxr-xr-x 11 thredds workshop     4096 2009-05-13 17:15 docs
drwxr-xr-x  5 thredds workshop     4096 2009-05-13 17:15 examples
drwxr-xr-x  5 thredds workshop     4096 2009-05-13 17:15 host-manager
drwxr-xr-x  5 thredds workshop     4096 2009-05-13 17:15 manager
drwxr-xr-x  3 thredds workshop     4096 2009-05-13 17:15 ROOT
</pre>
       <li>Deploy the TDS using the <code>manager</code> application.</li>
       <p>Upload the TDS WAR file using the <code><small>Deploy</small></code> section of the <code><small>manager</small></code>application:</p>
        <p><img src="../images/deploy.gif" height="306" width="738" alt="Deploy the TDS"></p>
       <p>Confirm the deployment went as planned by accessing the TDS using your browser: <a href="http://localhost:8080/thredds/">http://localhost:8080/thredds/</a></p>
       </ol>
     </div> <!-- end subsection -->




      <div id="subsection" class="exercise">
       <h3>Exercise Two: Deploy the THREDDS Data Server using the <code>manager</code> application</h3>
       <ol>
        <li>Using the steps outlined above, deploy the TDS using the <code>manager</code> application.</li>
       </ol>
      </div>


     <div id="subsection">
      <h3>Caveat of the <code>manager</code> application</h3>


      <div id="note" class="info">
       <h4><code>PermGen</code> on the Web</h4>
       <p>For a really good description of the issue, see this series of three articles:</p>
           <ul>
             <li>"<a href="http://my.opera.com/karmazilla/blog/2007/09/29/return-of-the-permgen">Return of the PermGen</a>" (2007-09-29)</li>
             <li>"<a href="http://my.opera.com/karmazilla/blog/2007/03/15/permgen-strikes-back">PermGen Strikes Back</a>" (2007-03-15)</li>
             <li>"<a href="http://my.opera.com/karmazilla/blog/2007/03/13/good-riddance-permgen-outofmemoryerror">Good Riddance PermGen OutOfMemoryError</a>" (2007-03-13)</li>
           </ul>
      </div>

      <p>The dreaded <code><small>java.lang.OutOfMemoryError: PermGen space failure</small></code> error:</p>
      <ul>
        <li><b>The issue: </b> The "PermGen" error happens when the JVM runs out of memory in the permanent generation.</li>
        <li><b>The cause: </b> Objects in the permanent generation are never garbage collected.  When redeploying your web application using the Tomcat <code><small>manager</small></code>  application, your WAR file is unpacked and parts of the class file definition are loaded into PermGen space, like string constants.</li>
        <li><b>The symptom:</b> The PermGen error will manifest itself in a sluggish Tomcat <code><small>manager</small></code>  application that never completes a task, and the <code><small>java.lang.OutOfMemoryError: PermGen space failure</small></code>  error being displayed in <code><small>$TOMCAT_HOME/logs/catalina.out</small></code> </li>
         <li><b>A temporary fix:</b> You can add the <code><small>-XX:MaxPermSize</small></code>  switch to <code><small>$JAVA_OPTS</small></code>  to increase the amount of memory allocated for the permanent generation,  However this is only postponed the inevitable, as even an increased memory in permanent generation will eventually fill up.  When this happens, you will need to stop/start Tomcat at this point. For this reason, you may want to restart Tomcat whenever you redeploy TDS or another webapp.</li>
       </ul>

     </div> <!-- end subsection -->


   </div> <!-- end Tomcat manager Application section -->





   <div id="section">
    <h2><a name="digested">Using Digested Passwords</a></h2>



     <div id="subsection">
      <h3>The problem of passwords in clear text</h3>

      <div id="note" class="info">
       <h4>Due Diligence</h4>
       <p>For added incentive to use encrypted passwords, read about the <a href="http://en.wikipedia.org/wiki/Man-in-the-middle_attack">man-in-the-middle attack</a>.</p>
      </div>


       <ul>
        <li>Passwords stored in clear text are a vulnerability if the host is compromised.</li>
        <li>Worse yet, these passwords are being sent from the client to the server (Tomcat) in clear text.  Anyone eavesdropping on the electronic conversation has easy access to the passwords.</li>
        <li>Better to have the passwords encrypted using a cryptographic hash functions (SHA, MD2, or MD5) and then stored in <code><small>tomcat-users.xml</small></code> </li>
        <li>Tomcat can be configured to support digested passwords (this is not the default setting). </li>
        <li>How it works: When a client makes a request Tomcat will tell the client that a digested password is required. Based on this dialog, the client will automatically digest the password entered by the user.</li>
       </ul>

     </div> <!-- end subsection -->



     <div id="subsection">
      <h3>Configure Tomcat to use digested passwords</h3>
       <ol>
        <li>First we need to enable digest passwords support in Tomcat by modifying <code>server.xml</code>.</li>
         <p>Open <code><small>$TOMCAT_HOME/conf/server.xml</small></code> with your favorite editor:</p>
<pre>
<b>$</b> vi server.xml
</pre>
        <p>Locate the <code><small>UserDatabaseRealm</small></code> (right above the <code><small>Host</small></code> element) and comment it out:</p>

<pre>
&lt;!-- This Realm uses the UserDatabase configured in the global JNDI
     resources under the key "UserDatabase".  Any edits
     that are performed against this UserDatabase are immediately
     available for use by the Realm.  --&gt;
&lt;!-- 
&lt;Realm className="org.apache.catalina.realm.UserDatabaseRealm"
       resourceName="UserDatabase"/&gt;
--&gt;
&lt;!-- Define the default virtual host
     Note: XML Schema validation will not work with Xerces 2.2.
--&gt;
&lt;Host name="localhost"  appBase="webapps"
      unpackWARs="true" autoDeploy="true"
      xmlValidation="false" xmlNamespaceAware="false"&gt;
</pre>  

     <p>Now add the flowing <code><small>MemoryRealm</small></code> information inside the <code><small>Host</small></code> element:</p>


<pre>
&lt;!-- This Realm uses the UserDatabase configured in the global JNDI
     resources under the key "UserDatabase".  Any edits
     that are performed against this UserDatabase are immediately
     available for use by the Realm.  --&gt;
&lt;!-- 
&lt;Realm className="org.apache.catalina.realm.UserDatabaseRealm"
       resourceName="UserDatabase"/&gt;
--&gt;
&lt;!-- Define the default virtual host
     Note: XML Schema validation will not work with Xerces 2.2.
--&gt;
&lt;Host name="localhost"  appBase="webapps"
      unpackWARs="true" autoDeploy="true"
      xmlValidation="false" xmlNamespaceAware="false"&gt;

&lt;Realm className="org.apache.catalina.realm.MemoryRealm" 
       digest="SHA" /&gt;
</pre>  
    <li>Create a SHA encrypted version of your password.</li>
     <p>Tomcat provides a script (<code><small>$TOMCAT_HOME/bin/digest.sh</small></code>) that will encrypt a password string according to the algorithm specified.  Use this script as follows with the password you made for yourself perviously:</p>

<pre>
<b>$</b> /home/thredds/apache-tomcat-6.0.20/bin/digest.sh -a SHA secret
secret:e5e9fa1ba31ecd1ae84f75caaa474f3a663f05f4
</pre>  

     <li>Update <code>tomcat-users.xml</code>.</li>
     <p>Replace your clear-text password in <code><small>tomcat-users.xml</small></code> with the encrypted version:</p>

<pre>
&lt;tomcat-users&gt;
    &lt;role rolename="manager"/&gt;
    &lt;user name="admin" password="e5e9fa1ba31ecd1ae84f75caaa474f3a663f05f4" roles="manager"/&gt;
&lt;/tomcat-users&gt;
</pre>  
     <li>Verify digest passwords have been successfully enabled in Tomcat.</li>


      <div id="note" class="info">
       <h4>BASIC Authentication</h4>
       <p>Since we are using BASIC authentication, you will need to clear any authenticated sessions in your browser to test whether digested passwords have been enabled.</p>
      </div>


     <p>Restart Tomcat and verify digest passwords have been successfully enabled by logging into the Tomcat <code><small>manager</small></code> application using your password in clear text: <a href="http://localhost:8080/manager/html/">http://localhost:8080/manager/html/</a></p>


      <div id="expanded" class="troubleshooting">
       <h4>Troubleshooting Tips</h4>
       <ul>
        <li>Check the XML syntax in <code><small>tomcat-users.xml</small></code> and <code><small>server.xml</small></code> to make sure it is well-formed and without error.</li>
        <li>Did you restart Tomcat after you made your changes to <code><small>tomcat-users.xml</small></code> and <code><small>server.xml</small></code> ?</li>
        <li>Any errors will be reported in <code><small>$TOMCAT_HOME/logs/catalina.out</small></code>. </li>
        <li>You do not need to type the encrypted version of your password into the browser (the browser automagically encrypts your password for you before it transmits it to the server).</li>
       </ul>
      </div>


     </div> <!-- end subsection -->



      <div id="subsection" class="exercise">
       <h3>Exercise Three: Configure Tomcat to use digested passwords</h3>
       <ol>
        <li>Using the steps outlined above, enable digested passwords in Tomcat.</li>
       </ol>
      </div>


   </div> <!-- end Using Digested Passwords section -->



   <p><img src="../images/thread.png" height="60" alt="THREDDS" valign="top" align="left" vspace="0" hspace="10" />  This document is maintained by Unidata and was last updated 
   
<script language="JavaScript" type="text/JavaScript">
    document.write(date_modified);
</script> 
Send comments to <a href="mailto:support-thredds@unidata.ucar.edu">THREDDS support</a>.</p>
  </body>
 </html>   

