<html>
<head>
<title>Managing the datasets</title>

</head>

<body>
<p>

Since the IDD works with near real-time datasets, the datasets are dynamic. The
datasets are arriving all the time, usually at the rate of 1-5 per second. It
doesn't take much to figure out that the LDM data partition would fill up in a 
matter of days if the files were not deleted in a timely manner. 

<h2>Managing datasets</h2>
<p>
The IDD/TDS has developed a script that runs once a day to remove the oldest 
files, keeping a certain number of files in the directory. The script is 
called 
<a href="manageFilesDirs.pl">manageFilesDirs.pl</a>, that has a configuration file called
<a href="manageFilesDirs.conf">manageFilesDirs.conf</a>.  Both files have 
documentation in the header explaining the usage of the files. 
The manageFilesDirs.pl
is usually located in the ~ldm/util directory and it's run out of a crontab
in an off peak hour. It takes about 1-2 hours to scan a large directory
structure. The manageFilesDirs.conf file usually resides in the ~ldm/etc
directory. Using the manageFilesDirs script one can regulate the number of files
to retain and to keep the the LDM data directory at consant usage level without
worry.

<h2>Pre indexing GRIB files</h2>
<p>
 
Since the IDD/TDS distributes GRIB files there is also another script that is used
to index the files for the TDS. Indexing the files before they are requested
greatly speeds up the access time for the files therefore it's highly
recommended. To pre-index the files, the <a href="GribIndexer.pl">GribIndexer.pl</a>
is used with the configuration <a href="GribIndexer.conf">GribIndexer.conf</a> file. 
There is a couple configurations in the GribIndexer.pl script that are needed
to access some of the TDS routines needed to index the files. The location of
Java 1.5, Tomcat home, and what version of Tomcat configurations. The 
GribIndexer.conf has information on how to configure in the header of the file.
The GribIndexer.pl script should be run every 10 minutes from crontab
to keep the indexing up to date. Besides indexing the GRIB files, an
inventory file is also created. This file extracts the metadata from the GRIB
file. It's recommended to install GribIndexer to improve performance of the
TDS.
</body>
</html>
